const cn="blck",a=["./","./index.html","./src/style.css","./src/script.js","./src/manifest.json","./src/favicon.ico","./src/icon192.png","./src/icon512.png","./src/lofi_am.mp3","./src/lofi_pm.mp3"];self.addEventListener("install",e=>{e.waitUntil(caches.open(cn).then(e=>e.addAll(a)).then(()=>self.skipWaiting()).catch(e=>{console.error("Service Worker: Cache pre-caching failed:",e)}))}),self.addEventListener("activate",e=>{e.waitUntil(caches.keys().then(e=>Promise.all(e.filter(e=>e.startsWith("blck")&&e!==cn).map(e=>caches.delete(e)))).then(()=>self.clients.claim()).catch(e=>{console.error("Service Worker: Cache cleanup failed:",e)}))}),self.addEventListener("fetch",t=>{t.request.url.startsWith("http")&&t.respondWith(caches.match(t.request).then(e=>e||fetch(t.request).then(e=>{if(e&&200===e.status&&"basic"===e.type){const c=e.clone();caches.open(cn).then(e=>{e.put(t.request,c)})}return e}).catch(()=>{})))});
